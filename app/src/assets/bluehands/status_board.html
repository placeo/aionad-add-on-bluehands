<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <style>
    html, body { height:100%; margin:0; padding:0; background:transparent; font-family:-apple-system, Roboto, Arial, sans-serif; position:relative; }
    table { height:100%; border-collapse:collapse; table-layout:fixed; }
    table.cols-4 { width: 100%; }
    table.cols-5 { width: 100%; }
    table.cols-3 { width: 75%; margin: 0 auto; }
    table.cols-2 { width: 50%; margin: 0 auto; }
    th, td { border:0; padding:0.4rem; text-align:center; vertical-align:middle; }
    .h { color:#ffffff; font-weight:700; font-size:1.0rem; }
    .done { background:#d9534f; }     /* 작업완료 */
    .inspect { background:#6c757d; }  /* 최종점검 */
    .working { background:#2f6db3; }  /* 작업중 */
    .empty { background:transparent; }
    .plate { font-weight:700; font-size:1.1rem; color:#0a2540; }
    .status { font-size:0.95rem; color:#0a2540; }
    .time { font-size:1.6rem; font-weight:800; color:#2f6db3; }

  </style>
</head>
<body>
  <table>
    <tr>
      <th class="h empty"></th>
      <th class="h empty"></th>
      <th class="h empty"></th>
      <th class="h empty"></th>
    </tr>
    <tr>
      <td class="plate"></td>
      <td class="plate"></td>
      <td class="plate"></td>
      <td class="plate"></td>
    </tr>
    <tr>
      <td class="status"></td>
      <td class="status"></td>
      <td class="status"></td>
      <td class="status"></td>
    </tr>
  </table>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const table = document.querySelector('table');
      if (table) {
        const firstRow = table.querySelector('tr');
        if (firstRow) {
          const colCount = firstRow.children.length;
          if (colCount > 0) {
            table.classList.add('cols-' + colCount);
          }
        }
      }
      
      // 현황 개수 업데이트 함수
      function updateStatusCounts() {
        const headers = document.querySelectorAll('th.h');
        let inspectCount = 0, workingCount = 0, doneCount = 0;
        
        headers.forEach(header => {
          if (header.classList.contains('inspect')) {
            inspectCount++;
          } else if (header.classList.contains('working')) {
            workingCount++;
          } else if (header.classList.contains('done')) {
            doneCount++;
          }
        });
        
        // Android TextView 업데이트를 위한 title 설정
        if (typeof Android !== 'undefined' && Android.updateStatus) {
          Android.updateStatus(doneCount, inspectCount, workingCount);
        } else {
          document.title = `작업완료: ${doneCount}대, 최종점검: ${inspectCount}대, 작업중: ${workingCount}대`;
        }
      }
      
      // 초기 현황 업데이트
      updateStatusCounts();
      
      // 1초마다 현황 개수 업데이트
      setInterval(updateStatusCounts, 1000);
    });
  </script>
</body>
</html>
